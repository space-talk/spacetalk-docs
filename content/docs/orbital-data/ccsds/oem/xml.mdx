
---
title: OEM XML Mapping
description: How to construct an OEM/XML instance per CCSDS 502.0-B-3 Section 8.10
outline: deep
---

Purpose

This page summarizes the canonical XML representation of an Orbit Ephemeris Message (OEM) and the mapping from KVN to XML. It follows Section 8 of CCSDS 502.0-B-3. XML is optional but recommended for machine readability.

Root element and schema (8.2–8.3)

- XML declaration (first line):
  - `<?xml version="1.0" encoding="UTF-8"?>`
- Root element for OEM:
  - `<oem id="CCSDS_OEM_VERS" version="3.0">`
- Namespace attribute for schema validation:
  - `xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"`
- Schema location (one of the SANA "ndmxml" master schema locations):
  - `xsi:noNamespaceSchemaLocation="https://sanaregistry.org/r/ndmxml_unqualified/ndmxml-3.0.0-master-3.0.xsd"`
  - or the "qualified" variant per Section 8: `xsi:schemaLocation="https://sanaregistry.org/r/ndmxml https://sanaregistry.org/r/ndmxml/ndmxml-3.0.0.xsd"`
- Use XSD validator; unqualified for simpler tags, qualified for namespaced.

Overall structure (8.1; 8.5–8.7; 8.10)

- `<oem>`
  - `<header>`
    - Optional `<COMMENT>…</COMMENT>` elements
    - `<CREATION_DATE>…</CREATION_DATE>`
    - `<ORIGINATOR>…</ORIGINATOR>`
    - Optional `<MESSAGE_ID>…</MESSAGE_ID>`
    - Optional `<CLASSIFICATION>…</CLASSIFICATION>`
  - `<body>`
    - One or more `<segment>` elements
      - `<metadata>` … `</metadata>`
      - `<data>`
        - Optional `<COMMENT>` elements at top of data
        - One or more `<stateVector>` elements
        - Optional one or more `<covarianceMatrix>` blocks (each with its own `<EPOCH>` and optional `<COV_REF_FRAME>`)
- Close all tags.
- NDM aggregation: Wrap in `<ndm>` for multi-ODM.

Metadata mapping (8.6; 5.2.3)

- Tags mirror KVN keywords in [Table 5-3](metadata.md#fields) using uppercase names.
- Required:
  - `<OBJECT_NAME>`, `<OBJECT_ID>`, `<CENTER_NAME>`, `<REF_FRAME>`, `<TIME_SYSTEM>`, `<START_TIME>`, `<STOP_TIME>`
- Conditional:
  - `<REF_FRAME_EPOCH>` if required by frame definition
  - `<INTERPOLATION>` and `<INTERPOLATION_DEGREE>` (if interpolation guidance is provided)
  - `<USEABLE_START_TIME>`, `<USEABLE_STOP_TIME>`
- Place the metadata before the corresponding `<data>`.
- `<COMMENT>` repeatable; text content CDATA if special chars.

| KVN Keyword | XML Element | Notes |
|-------------|-------------|-------|
| OBJECT_NAME | `<OBJECT_NAME> text </OBJECT_NAME>` | Text content |
| REF_FRAME | `<REF_FRAME> EME2000 </REF_FRAME>` | Enum from SANA |
| ... | ... | ... |

Ephemeris mapping (8.10.13–8.10.18; 5.2.4)

- Each ephemeris line becomes a `<stateVector>` element with child tags:
  - `<EPOCH>`, `<X>`, `<Y>`, `<Z>`, `<X_DOT>`, `<Y_DOT>`, `<Z_DOT>`, optional `<X_DDOT>`, `<Y_DDOT>`, `<Z_DDOT>`
- Units:
  - In XML, you may include units attributes (e.g., units="km") if desired (Table 8-6). KVN ephemeris lines never display units.
- Order: Epoch first, then position, velocity, acceleration.

Covariance mapping (8.10.19–8.10.24; 5.2.5; Table 8-7)

- A covariance section in XML is encoded using a `<covarianceMatrix>` element for each matrix.
  - Required children:
    - `<EPOCH>`
    - Optional `<COV_REF_FRAME>` if different from the segment's `<REF_FRAME>`
    - Lower-triangular matrix elements as individual tags: CX_X, CY_X, CY_Y, …, CZ_DOT_Z_DOT (Table 8-7).
- Units attributes may be included per Table 8-7.
- `<CX_X units="km**2">value</CX_X>`

Minimal OEM/XML example (conforming)

```xml
<?xml version="1.0" encoding="UTF-8"?>
<oem xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="https://sanaregistry.org/r/ndmxml_unqualified/ndmxml-3.0.0-master-3.0.xsd"
    id="CCSDS_OEM_VERS" version="3.0">
<header>
    <CREATION_DATE>2002-204T15:56:23Z</CREATION_DATE>
    <ORIGINATOR>GSFC</ORIGINATOR>
</header>
<body>
    <segment>
        <metadata>
            <OBJECT_NAME>STS 106</OBJECT_NAME>
            <OBJECT_ID>2000-053A</OBJECT_ID>
            <CENTER_NAME>EARTH</CENTER_NAME>
            <REF_FRAME>EME2000</REF_FRAME>
            <TIME_SYSTEM>UTC</TIME_SYSTEM>
            <START_TIME>1996-12-18T14:28:15.1172</START_TIME>
            <STOP_TIME>1996-12-18T14:28:15.1172</STOP_TIME>
        </metadata>
        <data>
            <stateVector>
                <EPOCH>1996-12-18T22:00:00.0000</EPOCH>
                <X units="km">35773.173676</X>
                <Y units="km">131.640706</Y>
                <Z units="km">2.348777</Z>
                <X_DOT units="km/s">0.001161</X_DOT>
                <Y_DOT units="km/s">3.164996</Y_DOT>
                <Z_DOT units="km/s">-0.000008</Z_DOT>
            </stateVector>
        </data>
    </segment>
</body>
</oem>
```

OEM/XML with covariance (illustrative)

```xml
<data>
  <stateVector> … </stateVector>
  <covarianceMatrix>
    <EPOCH>2019-12-28T21:29:07.267</EPOCH>
    <COV_REF_FRAME>EME2000</COV_REF_FRAME>
    <CX_X units="km**2">2.406801E+02</CX_X>
    <CY_X units="km**2">1.569366E+02</CY_X>
    <CY_Y units="km**2">2.406801E+02</CY_Y>
    <!-- remaining lower triangular elements -->
  </covarianceMatrix>
</data>
```

Multi-segment XML:

```xml
<segment> <!-- First -->
<metadata>...</metadata>
<data>...</data>
</segment>
<segment> <!-- Second -->
...
</segment>
```

Notes and constraints

- Ordering: header → segment → metadata → data → stateVector(s) → covarianceMatrix (optional). Repeat `<segment>` for multiple blocks (8.10.6–8.10.7).
- TIME_SYSTEM must be uniform for all epochs in the OEM (5.2.4.5).
- Do not invent attributes beyond those defined by the schema. Use only the permitted units attributes and element names from Section 8.
- KVN vs XML differences:
  - KVN ephemeris/covariance lines are compact, unitless; XML uses tags per field and may include units attributes.
- Qualified schema uses `xmlns:ndm="https://sanaregistry.org/r/ndmxml";` elements prefixed.